# 03. 군집분석
## 1. 군집분석
### (1) 군집분석 개요
* 여러 변수로 표현된 자료들 사이의 유사성 측정-> 유사한 자료들끼리 몇 개의 군집(cluster)로 묶기-> 다변량분석(상관분석, 회귀분석, 주성분분석 등)을 활용
-> 각 군집에 대한 특징을 파악하는 방법

* 생물학에서는 종의 분류, 마케팅에서는 시장 세분화, 금융에서는 산업 분석 등 다양하게 활용, 협업 필터링(Collaborative Filtering)같은 추천 서비스 등장 기반 제공
* 관측치의 유사성을 측정하기 위한 방법
  * 거리측도: 유클리디안 거리, 맨하튼 거리
  * 유사성 측도: 코사인거리, 상관계수
  * 거리가 가까울수록 유사성이 큼
* 군집분석의 평가 지표로는 실루엣 계수 사용됨
  * 응집도와 분리도 계산함
  * 그 값이 1에 가까울수록 완벽하게 분리되었다고 판단함

### (2) 거리측도
#### 1. 변수가 연속형일 경우
* 유클리디안 거리(Euclidean)
  * 두 점 사이의 거리를 계산할 때 가장 널리 쓰이는 계산방법
  * 두 점 사이의 가장 짧은 거리를 계산함
  * 통계적 개념이 포함되지 않은 수학적 거리-> 변수들의 산포정도를 감안하지 않음
$$d(x, y)=\sqrt{\sum_{i=1}^n (x_i-y_i)^2}$$

* 맨하튼 거리(Manhattan)
  * 두 점 사이를 가로지르지 않고 길을 따라 갔을 때의 거리
  * 수학적 거리, 시가거리라고도 표현, 도시에서 최단거리를 움직이듯 변수들의 차이의 단순합으로 계산한 거리
$$d(x, y)=\sum_{i=1}^n|x_i-y_i|$$
![image](https://github.com/qlkdkd/2-winter/assets/71871927/6a40f274-d8fd-4fca-bd15-906937623248)

* 체비셰프 거리(Chebychev): 변수 간 거리 차이 중 최댓값을 데이터 간의 거리로 정의
$$d(x, y)=max|x_i-y_i|$$

* 표준화 거리(Standardized): 유클리디안 거리에서 변수 간 단위의 차이로 어떤 변수가 거리 측정에 크게 기여하지 못하는 문제를 표준편차로 나눔으로써 해결한 거리다
$$d(x, y)=[\sum_{i=1}^n \frac{|x_i-y_i|^2}{S_ii}]^{1/2}=[(X-Y)^T D^{-1} (X-Y)]^{1/2}$$($D$: 변수의 분산을 성분으로 하는 대각행렬)

* 마할라노비스 거리: 표준화 거리가 고려하지 못한 변수 간 상관성까지 고려한 거리
$$d(x, y)=[(X-Y)^T S^{-1} (X-Y)]^{1/2}$$($S$: 변수의 공분산을 성분으로 하는 대각행렬)

* 민코프스키 거리: 유클리디안 거리와 맨하튼 거리를 한번에 표현한 거리. m=1일 때는 맨하튼 거리, m=2일때 유클리디안 거리
$$d(x, y)=[\sum_{i=1}^n|x_i-y_i|^m]^{1/m}$$
![image](https://github.com/qlkdkd/2-winter/assets/71871927/1ee79e29-1071-4d3e-9ac5-c42ed70cf54f)

#### 표준화와 정규화
각 변수 사이의 단위의 차이는 거리에 영향을 줄 수 있기 때문에 유클리디안 거리를 사용하기 전에 일반적으로 정규화 또는 표준화를 수행한다
* 표준화: 관측치들이 평균으로부터 얼마나 떨어져 있는지를 나타낼 때 사용됨. 표준화한 자료들의 평균은 0, 표준편차는 1이 되기 때문에 변수 간 분포를 통일할 수 있다
$$x_new=\frac{x-\mu}{\sigma}$$($\mu$: x의 평균, $\sigma$: x의 표준편차)
* 정규화: 모든 데이터의 범위를 0과 1 사이로 변환하여 분포를 조정하는 방법
$$x_new=\frac{x-x_min}{x_max-x_min}$$

#### 2. 변수가 범주형인 경우
데이터가 범주형 변수인 경우 얼마나 많은 공통된 요소를 갖고 있는지 판단할 수 있음
* 단순 일치 계수: 두 객체 i와 j간의 상이성을 불일치 비율로 계산함. P: 변수의 총 개수, m: 객체 i와 j가 같은 상태인 변수의 수(일치한 수)
$$d(i, j)=\frac{m}{p}$$
