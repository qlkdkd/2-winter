# 04. 다변량 분석
## 1. 다차원 척도법
### (1) 다차원 척도법의 개요
#### 1. 다차원 척도법(Multidimensional Scaling, MDS)의 개념
* 다차원 척도법: 객체 간의 근접성을 시각화하는 통계기법, 군집분석과 유사
* 객체들 사이에 유사성 혹은 비유사성을 측정, 원래의 차원보다 낮은 차원의 공간에 군집분석처럼 점으로 표현
* 데이터 축소의 목적, 즉 데이터들의 유사성 혹은 비유사성은 데이터들의 정보 속성을 파악하기 위한 수단으로도 활용
* 객체들 간의 거리: 유클리디안 거리행렬을 사용하여 계산

#### 2. 다차원 척도법의 측도
* 다차원 척도법에서는 개체의 실제 거리와 모형에 의해 추정된 거리 사이의 적합도를 측정하기 위해 stress 척도 사용
$$stress-\sqrt{\frac{\sum(실제거리-추정거리)^2}{\sum실제거리^2}}$$
* 스트레스 값은 0~1사이의 값을 가지며 그 값이 낮을수록 적합도가 높다고 평가함
* 보통 0.05 이내이면 적합도가 좋다고 판단하고, 0.15 이상이면 적합도가 매우 나쁘다고 판단함
![image](https://github.com/qlkdkd/2-winter/assets/71871927/d9fcfe29-5fc7-4821-8b33-ebdcd6c9cee4)

### (2) 다차원 척도법의 종류

계량적 MDS|비계량적 MDS
---|---
구간척도, 비율척도|서열척도
유클리디안 거리행렬|서열척도를 거리속성값으로 변환하여 사용
R에서 'cmdscale' 함수 사용|R에서 'isoMDS' 함수 사용

### (3) 다차원 척도법 실습
```r
cal=c(52, 160, 89, 57, 34, 32, 30, 69)#열량: 각각 사과, 아보카도, 바나나, 블루베리, 멜론, 수박, 딸기, 포도
car=c(112.4, 8.5, 22.8, 14.5, 8.2, 7.7, 7.6, 18.1)#탄수화물
fat=c(0.2, 14.7, 1.2, 0.7, 0.2, 0.3, 0.2, 0.2)#지방
pro=c(0.3, 2.0, 1.1, 0.3, 0.8, 0.7, 0.6, 0.7)#단백질
fib=c(2.4, 6.7, 2.6, 2.4, 0.9, 2.0, 0.4, 0.9)#식이섬유
sug=c(10.4, 0.7, 12.2, 9.9, 7.9, 4.7, 6.2, 15.5)#설탕(당)

fruits=data.frame(cal, car, fat, pro, fib, sug)
fruits_dist=dist(fruits)
fruits_loc=cmdscale(fruits_dist)
x_loc=fruits_loc[, 1]
y_loc=fruits_loc[, 2]
plot(x_loc, y_loc, type='n')
#type='l'은 연결선, type='p'는 점, type='n'은 찍지 않음을 의미
text(x_loc, y_loc, rownames(fruits))
abline(v=0, h=0)
```
![image](https://github.com/qlkdkd/2-winter/assets/71871927/61956ef0-e4f8-4fc7-8804-b1e89b05484e)

---

## 2. 주성분분석(PCA)
### (1) 주성분분석 개요
#### 1. 주성분분석(Principal Components Analysis)의 개념
* 여러 개의 변수 중 서로 상관성이 높은 변수들의 선형결합, 새로운 변수(주성분)를 만들어 기존 변수를 요약 및 축소하는 분석 방법
* 2개의 변수는 데이터를 두 개의 관점에서 바라본다고 말할 수 있음
  * 그러나 2개의 변수를 이해하기 힘든 경우 데이터들의 변수를 요약하여 하나의 변수로만 데이터의 위치 정보를 나타내는 것이 주성분 분석의 목적

#### 2. 주성분분석의 목적
* 변수를 축소하여 모형의 설명력을 높임
* 다중공선성 문제를 해결
* 군집분석 시 모형의 성능을 높일 수 있음
* IoT 센서 데이터를 주성분분석 후 스마트팩토리에 활용
* 주성분분석 시 선형변환이 필요함

#### 3. 주성분분석 방법
* 주어진 데이터를 하나의 변수로 요약한다는 것: 하나의 관점에서 바라보는 것을 의미, 그에 따른 데이터 손실(점선)이 발생할 수 밖에 없음
* 자료의 분삭(퍼진 정도)이 가장 큰 축을 찾아 새로운 변수로 만드는 방법
* 데이터를 가장 잘 표현하는 직교상의 데이터 벡터들을 찾아서 데이터 압축: 속성들을 선택하고 조합하여 다른 작은 집합 생성
* 장점
  * 계산이 간단함
  * 데이터 부족이나 일률적 데이터 혹은 정렬되지 않은 속성을 가진 데이터 처리 가능
![image](https://github.com/qlkdkd/2-winter/assets/71871927/ecc50eca-d2fb-4c89-b482-76bc2fa5724a)

### (2) 주성분분석 사례 실습
#### 1. 주성분분석 1
```r
cal=c(52, 160, 89, 57, 34, 32, 30, 69)#열량: 각각 사과, 아보카도, 바나나, 블루베리, 멜론, 수박, 딸기, 포도
car=c(112.4, 8.5, 22.8, 14.5, 8.2, 7.7, 7.6, 18.1)#탄수화물
fat=c(0.2, 14.7, 1.2, 0.7, 0.2, 0.3, 0.2, 0.2)#지방
pro=c(0.3, 2.0, 1.1, 0.3, 0.8, 0.7, 0.6, 0.7)#단백질
fib=c(2.4, 6.7, 2.6, 2.4, 0.9, 2.0, 0.4, 0.9)#식이섬유
sug=c(10.4, 0.7, 12.2, 9.9, 7.9, 4.7, 6.2, 15.5)#설탕(당)

fruits=data.frame(cal, car, fat, pro, fib, sug)
result=prcomp(fruits, center=T, scale.=T)
result
summary(result)

plot(result, type='l')
```
![image](https://github.com/qlkdkd/2-winter/assets/71871927/81a2c16d-844d-4c22-bb6a-830dbe61a9a6)
![image](https://github.com/qlkdkd/2-winter/assets/71871927/32930bbc-800d-4106-a571-ba4d1d0ecb20)
* `screen plot`은 x축을 성분의 개수, y축은 고윳값(eigenvalue)으로 하는 그래프로 주성분의 개수를 선택하는 데 도움을 줌
* 일반적으로 고윳값이 1 근처의 값을 갖는 주성분분석의 수를 결정할 수 있음

#### 2. 주성분분석2-biplot
```r
cal=c(52, 160, 89, 57, 34, 32, 30, 69)#열량: 각각 사과, 아보카도, 바나나, 블루베리, 멜론, 수박, 딸기, 포도
car=c(112.4, 8.5, 22.8, 14.5, 8.2, 7.7, 7.6, 18.1)#탄수화물
fat=c(0.2, 14.7, 1.2, 0.7, 0.2, 0.3, 0.2, 0.2)#지방
pro=c(0.3, 2.0, 1.1, 0.3, 0.8, 0.7, 0.6, 0.7)#단백질
fib=c(2.4, 6.7, 2.6, 2.4, 0.9, 2.0, 0.4, 0.9)#식이섬유
sug=c(10.4, 0.7, 12.2, 9.9, 7.9, 4.7, 6.2, 15.5)#설탕(당)

fruits=data.frame(cal, car, fat, pro, fib, sug)
result=prcomp(fruits, center=T, scale.=T)
result
summary(result)
biplot(result)
```
![image](https://github.com/qlkdkd/2-winter/assets/71871927/90516086-38dd-4ad6-b52b-5877b1722daf)
* `biplot`은 첫 번째 주성분과 두 번째 주성분을 축으로 하는 그래프
* biplot 그래프는 다차원 척도법과 같이 주성분분석의 결과로 데이터가 어떻게 퍼져 있는지 시각화할 수 있음
